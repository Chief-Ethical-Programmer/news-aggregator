{
  "name": "Daily News Aggregation - Complete",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "cronExpression": "0 8 * * *"
            }
          ]
        }
      },
      "id": "0d5e3e8c-8c4b-4f3a-9a5d-1f2e3b4c5d6e",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        250,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://feeds.feedburner.com/TheHackersNews"
      },
      "id": "1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d",
      "name": "RSS - HackerNews",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        100
      ]
    },
    {
      "parameters": {
        "url": "https://www.bleepingcomputer.com/feed/"
      },
      "id": "2b3c4d5e-6f7a-8b9c-0d1e-2f3a4b5c6d7e",
      "name": "RSS - BleepingComputer",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        200
      ]
    },
    {
      "parameters": {
        "url": "https://threatpost.com/feed/"
      },
      "id": "3c4d5e6f-7a8b-9c0d-1e2f-3a4b5c6d7e8f",
      "name": "RSS - Threatpost",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://www.artificialintelligence-news.com/feed/"
      },
      "id": "4d5e6f7a-8b9c-0d1e-2f3a-4b5c6d7e8f9a",
      "name": "RSS - AI News",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        400
      ]
    },
    {
      "parameters": {
        "url": "https://www.marktechpost.com/feed/"
      },
      "id": "5e6f7a8b-9c0d-1e2f-3a4b-5c6d7e8f9a0b",
      "name": "RSS - MarkTechPost",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        500
      ]
    },
    {
      "parameters": {
        "url": "https://techcrunch.com/feed/"
      },
      "id": "6f7a8b9c-0d1e-2f3a-4b5c-6d7e8f9a0b1c",
      "name": "RSS - TechCrunch",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        600
      ]
    },
    {
      "parameters": {
        "url": "https://www.theverge.com/rss/index.xml"
      },
      "id": "7a8b9c0d-1e2f-3a4b-5c6d-7e8f9a0b1c2d",
      "name": "RSS - The Verge",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        450,
        700
      ]
    },
    {
      "parameters": {
        "mode": "combine",
        "combinationMode": "mergeByPosition",
        "options": {}
      },
      "id": "8b9c0d1e-2f3a-4b5c-6d7e-8f9a0b1c2d3e",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        650,
        400
      ]
    },
    {
      "parameters": {
        "jsCode": "// Rule-based priority scoring system\nconst items = $input.all();\nconst articles = [];\n\n// High priority keywords by category\nconst criticalKeywords = {\n  cybersecurity: ['zero-day', 'vulnerability', 'breach', 'ransomware', 'exploit', 'critical', 'urgent', 'emergency', 'attack', 'malware', 'phishing', 'hack', 'cve-', 'patch'],\n  ai: ['breakthrough', 'gpt-5', 'agi', 'openai', 'google ai', 'deepmind', 'chatgpt', 'claude', 'gemini', 'large language model', 'llm', 'artificial general intelligence'],\n  tech: ['layoff', 'acquisition', 'ipo', 'bankruptcy', 'regulation', 'antitrust', 'launch', 'release', 'funding']\n};\n\nconst importantKeywords = {\n  cybersecurity: ['patch', 'update', 'security', 'threat', 'warning', 'advisory', 'flaw', 'fix'],\n  ai: ['model', 'training', 'research', 'paper', 'study', 'development', 'innovation', 'api'],\n  tech: ['announcement', 'partnership', 'startup', 'product', 'feature', 'update']\n};\n\nfunction determineCategory(title, description) {\n  const text = (title + ' ' + description).toLowerCase();\n  \n  const cyberScore = criticalKeywords.cybersecurity.filter(kw => text.includes(kw)).length +\n                     importantKeywords.cybersecurity.filter(kw => text.includes(kw)).length;\n  const aiScore = criticalKeywords.ai.filter(kw => text.includes(kw)).length +\n                  importantKeywords.ai.filter(kw => text.includes(kw)).length;\n  const techScore = criticalKeywords.tech.filter(kw => text.includes(kw)).length +\n                    importantKeywords.tech.filter(kw => text.includes(kw)).length;\n  \n  if (cyberScore >= aiScore && cyberScore >= techScore && cyberScore > 0) return 'cybersecurity';\n  if (aiScore >= techScore && aiScore > 0) return 'ai';\n  if (techScore > 0) return 'tech';\n  return 'general';\n}\n\nfunction calculateRating(title, description, category, pubDate) {\n  const text = (title + ' ' + description).toLowerCase();\n  let score = 3; // Base score\n  \n  // Check for critical keywords (+2 points)\n  const criticalMatches = criticalKeywords[category]?.filter(kw => text.includes(kw)).length || 0;\n  if (criticalMatches >= 2) score += 2;\n  else if (criticalMatches === 1) score += 1;\n  \n  // Check for important keywords (+1 point)\n  const importantMatches = importantKeywords[category]?.filter(kw => text.includes(kw)).length || 0;\n  if (importantMatches >= 2) score += 1;\n  \n  // Check article freshness (recent = higher priority)\n  if (pubDate) {\n    const hoursSincePublish = (Date.now() - new Date(pubDate).getTime()) / (1000 * 60 * 60);\n    if (hoursSincePublish <= 6) score += 1;\n  }\n  \n  // Check for urgency words in title\n  const urgencyWords = ['breaking', 'urgent', 'critical', 'major', 'massive', 'significant', 'important'];\n  if (urgencyWords.some(word => title.toLowerCase().includes(word))) score += 1;\n  \n  // Cap at 5 stars, minimum 1\n  return Math.min(5, Math.max(1, score));\n}\n\nfunction generateReasoning(rating, category, title, description) {\n  const text = (title + ' ' + description).toLowerCase();\n  let reasons = [];\n  \n  if (rating === 5) {\n    reasons.push('Critical priority - immediate attention required');\n  } else if (rating === 4) {\n    reasons.push('High priority - important development');\n  } else if (rating === 3) {\n    reasons.push('Moderate priority - relevant information');\n  } else {\n    reasons.push('Standard news item');\n  }\n  \n  // Add specific reasoning\n  if (text.includes('zero-day') || text.includes('vulnerability')) {\n    reasons.push('Security vulnerability detected');\n  }\n  if (text.includes('breach') || text.includes('hack')) {\n    reasons.push('Security incident reported');\n  }\n  if (text.includes('breakthrough') || text.includes('innovation')) {\n    reasons.push('Significant technological advancement');\n  }\n  if (text.includes('critical') || text.includes('urgent')) {\n    reasons.push('Requires immediate attention');\n  }\n  \n  return reasons.join('. ');\n}\n\nfunction extractKeywords(title, description, category) {\n  const text = (title + ' ' + description).toLowerCase();\n  const allKeywords = [\n    ...(criticalKeywords[category] || []), \n    ...(importantKeywords[category] || [])\n  ];\n  return allKeywords.filter(kw => text.includes(kw));\n}\n\nfor (const item of items) {\n  const title = item.json.title || '';\n  const description = item.json.description || item.json.content || item.json.summary || '';\n  const pubDate = item.json.pubDate || item.json.isoDate || item.json.published;\n  const url = item.json.link || item.json.url || '';\n  \n  // Skip if no title or URL\n  if (!title || !url) continue;\n  \n  const category = determineCategory(title, description);\n  const rating = calculateRating(title, description, category, pubDate);\n  const reasoning = generateReasoning(rating, category, title, description);\n  const keywords = extractKeywords(title, description, category);\n  \n  articles.push({\n    json: {\n      title: title.substring(0, 500),\n      url: url,\n      description: description.substring(0, 1000),\n      rating: rating,\n      reasoning: reasoning,\n      category: category,\n      keywords: JSON.stringify(keywords),\n      publishedDate: pubDate || new Date().toISOString(),\n      aggregatedDate: new Date().toISOString(),\n      source: item.json.creator || 'RSS Feed'\n    }\n  });\n}\n\n// Sort by rating (highest first)\narticles.sort((a, b) => b.json.rating - a.json.rating);\n\nreturn articles;"
      },
      "id": "9c0d1e2f-3a4b-5c6d-7e8f-9a0b1c2d3e4f",
      "name": "Smart Priority Scoring",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        850,
        400
      ]
    },
    {
      "parameters": {
        "operation": "insert",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "articles",
          "mode": "list",
          "cachedResultName": "articles"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "title": "={{ $json.title }}",
            "url": "={{ $json.url }}",
            "description": "={{ $json.description }}",
            "rating": "={{ $json.rating }}",
            "reasoning": "={{ $json.reasoning }}",
            "category": "={{ $json.category }}",
            "keywords": "={{ $json.keywords }}",
            "published_date": "={{ $json.publishedDate }}",
            "aggregated_date": "={{ $json.aggregatedDate }}",
            "source": "={{ $json.source }}"
          },
          "matchingColumns": [],
          "schema": []
        },
        "options": {
          "skipOnConflict": true
        }
      },
      "id": "0d1e2f3a-4b5c-6d7e-8f9a-0b1c2d3e4f5a",
      "name": "PostgreSQL - Save Articles",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [
        1050,
        400
      ],
      "credentials": {
        "postgres": {
          "id": "1",
          "name": "PostgreSQL account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.rating }}",
              "operation": "largerEqual",
              "value2": 4
            }
          ]
        }
      },
      "id": "1e2f3a4b-5c6d-7e8f-9a0b-1c2d3e4f5a6b",
      "name": "IF - Filter High Priority",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1250,
        400
      ]
    },
    {
      "parameters": {
        "jsCode": "const articles = $input.all().map(item => item.json);\n\nif (articles.length === 0) {\n  return [{ json: { noArticles: true } }];\n}\n\nconst fiveStars = articles.filter(a => a.rating === 5);\nconst fourStars = articles.filter(a => a.rating === 4);\n\nconst today = new Date().toLocaleDateString('en-US', { \n  weekday: 'long', \n  year: 'numeric', \n  month: 'long', \n  day: 'numeric' \n});\n\nlet emailBody = `# ðŸ“° Daily High-Priority News Digest\\n\\n**${today}**\\n\\n`;\n\nif (fiveStars.length > 0) {\n  emailBody += `## ðŸ”¥ Must Read Today (${fiveStars.length} articles)\\n\\n`;\n  fiveStars.forEach((article, idx) => {\n    emailBody += `### ${idx + 1}. ${article.title}\\n`;\n    emailBody += `**â­â­â­â­â­ | ${article.category.toUpperCase()}**\\n\\n`;\n    emailBody += `**Why it matters:** ${article.reasoning}\\n\\n`;\n    \n    // Parse keywords\n    let keywords = [];\n    try {\n      keywords = JSON.parse(article.keywords);\n    } catch (e) {\n      keywords = [];\n    }\n    if (keywords.length > 0) {\n      emailBody += `**Keywords:** ${keywords.join(', ')}\\n\\n`;\n    }\n    \n    emailBody += `[Read Full Article](${article.url})\\n\\n---\\n\\n`;\n  });\n}\n\nif (fourStars.length > 0) {\n  emailBody += `## â­ Important Updates (${fourStars.length} articles)\\n\\n`;\n  fourStars.slice(0, 10).forEach((article, idx) => {\n    emailBody += `### ${idx + 1}. ${article.title}\\n`;\n    emailBody += `**â­â­â­â­ | ${article.category.toUpperCase()}**\\n\\n`;\n    emailBody += `${article.reasoning}\\n\\n`;\n    emailBody += `[Read more](${article.url})\\n\\n`;\n  });\n}\n\nconst byCategory = {\n  cybersecurity: articles.filter(a => a.category === 'cybersecurity').length,\n  ai: articles.filter(a => a.category === 'ai').length,\n  tech: articles.filter(a => a.category === 'tech').length,\n  general: articles.filter(a => a.category === 'general').length\n};\n\nemailBody += `\\n## ðŸ“Š Today's Summary\\n\\n`;\nemailBody += `- **Cybersecurity:** ${byCategory.cybersecurity} high-priority articles\\n`;\nemailBody += `- **AI/ML:** ${byCategory.ai} high-priority articles\\n`;\nemailBody += `- **Tech:** ${byCategory.tech} high-priority articles\\n`;\nemailBody += `- **Total High Priority:** ${articles.length} articles\\n\\n`;\n\nemailBody += `---\\n*Automated by n8n News Aggregator*`;\n\nreturn [{\n  json: {\n    subject: `ðŸ“° ${fiveStars.length} Must-Reads Today | ${today}`,\n    body: emailBody,\n    totalArticles: articles.length\n  }\n}];"
      },
      "id": "2f3a4b5c-6d7e-8f9a-0b1c-2d3e4f5a6b7c",
      "name": "Format Daily Email",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1450,
        300
      ]
    },
    {
      "parameters": {
        "fromEmail": "your-email@example.com",
        "toEmail": "recipient@example.com",
        "subject": "={{ $json.subject }}",
        "emailType": "text",
        "text": "={{ $json.body }}",
        "options": {}
      },
      "id": "3a4b5c6d-7e8f-9a0b-1c2d-3e4f5a6b7c8d",
      "name": "Send Email",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        1650,
        300
      ],
      "credentials": {
        "smtp": {
          "id": "1",
          "name": "SMTP account"
        }
      },
      "disabled": true
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "RSS - HackerNews",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - BleepingComputer",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - Threatpost",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - AI News",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - MarkTechPost",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - TechCrunch",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS - The Verge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS - HackerNews": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS - BleepingComputer": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "RSS - Threatpost": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "RSS - AI News": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "RSS - MarkTechPost": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 4
          }
        ]
      ]
    },
    "RSS - TechCrunch": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 5
          }
        ]
      ]
    },
    "RSS - The Verge": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 6
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Smart Priority Scoring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Smart Priority Scoring": {
      "main": [
        [
          {
            "node": "PostgreSQL - Save Articles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PostgreSQL - Save Articles": {
      "main": [
        [
          {
            "node": "IF - Filter High Priority",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Filter High Priority": {
      "main": [
        [
          {
            "node": "Format Daily Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Daily Email": {
      "main": [
        [
          {
            "node": "Send Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-11-13T00:00:00.000Z",
  "versionId": "1"
}
